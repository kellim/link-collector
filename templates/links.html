{% extends "base.html" %}
{% block content %}

  <div class="sidebar">
    <h2>Link Categories</h2>

    <ul>
    {% if categories.count() > 0 %}
      {% for cat in categories %}
      <li class="cat">
        {% if cat.path != selected_category.path %}
          <a href="{{ url_for('show_category_links', collection=collection, category=cat.path) }}">{{ cat.name }}</a>
        {% else %}
          <li class="cat">{{ cat.name }}
        {% endif %}
      </li>
      {% endfor %}
    {% endif %}
      <li>
        <a href="{{ url_for('new_category', collection=collection) }}">Create New Category</a>
      </li>
    </ul>


  </div>

  {% include "flashmessages.html" %}

  <h2>{{ selected_category.name }}</h2>
  {% if selected_category %}
    <div class="admin">
      Make changes to {{ selected_category.name }} Category:
      <span class="edit-link"><a href="{{ url_for('edit_category', collection=collection, category=selected_category.path) }}">Edit</a></span>
      <span class="delete-link"><a href="{{ url_for('delete_category', collection=collection, category=selected_category.path) }}">Delete</a></span>
    </div>
      <p>{{ selected_category.description }}</p>
    <div class="links">
      {% if links %}
      <ul>
        {% for link in links %}
          <li class="link">
            <a href="{{ link.url }}">{{ link.name }}</a> - {{ link.description }}
            <a class="edit_link" href="{{ url_for('edit_link', collection=collection, category=selected_category.path, link_id=link.link_id) }}">Edit</a>
            <a class="delete_link" href="{{ url_for('delete_link', collection=collection, category=selected_category.path, link_id=link.link_id) }}">Delete</a>
          </li>
        {% endfor %}
      </ul>
      {% endif %}
    </div>
  {% endif %}

{% endblock %}